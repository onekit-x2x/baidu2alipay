'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
class CommonError extends Error {
    constructor(error, message, errors = {}) {
        super(message || (error && error.message) || '');
        this.errors = errors;
        this.reference = 'https://www.cloud.alipay.com/docs/2/91090';
        this.message = this.formatMessage(this.message);
        if (error) {
            if (error.stack) {
                this.stack = error.stack;
            }
            if (error.reference) {
                this.reference = error.reference;
            }
        }
        if (Error.hasOwnProperty('captureStackTrace')) {
            Error.captureStackTrace(this, CommonError);
        }
    }
    get httpStatusCode() {
        return this.constructor.httpStatusCode || 500;
    }
    formatMessage(message) {
        const parts = [];
        if (this.constructor.prefix) {
            parts.push(this.constructor.prefix);
        }
        if (message) {
            parts.push(message);
        }
        return parts.join('ï¼š');
    }
    setErrors(data) {
        this.errors = data;
    }
    inspect() {
        return {
            code: this.constructor.code,
            errors: this.errors,
            message: this.message,
            reference: this.reference,
        };
    }
}
CommonError.code = 'COMMON_ERROR';
exports.CommonError = CommonError;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXJyb3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZXJyb3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOztBQVliLE1BQXNCLFdBQVksU0FBUSxLQUFLO0lBSzdDLFlBQVksS0FBYSxFQUFFLE9BQWdCLEVBQVMsU0FBYyxFQUFFO1FBQ2xFLEtBQUssQ0FBQyxPQUFPLElBQUksQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBREMsV0FBTSxHQUFOLE1BQU0sQ0FBVTtRQUY3RCxjQUFTLEdBQVcsMkNBQTJDLENBQUM7UUFLckUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNoRCxJQUFJLEtBQUssRUFBRTtZQUNULElBQUksS0FBSyxDQUFDLEtBQUssRUFBRTtnQkFDZixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7YUFDMUI7WUFDRCxJQUFJLEtBQUssQ0FBQyxTQUFTLEVBQUU7Z0JBQ25CLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQzthQUNsQztTQUNGO1FBRUQsSUFBSSxLQUFLLENBQUMsY0FBYyxDQUFDLG1CQUFtQixDQUFDLEVBQUU7WUFDN0MsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQztTQUM1QztJQUNILENBQUM7SUFFRCxJQUFXLGNBQWM7UUFDdkIsT0FBUSxJQUFJLENBQUMsV0FBcUIsQ0FBQyxjQUFjLElBQUksR0FBRyxDQUFDO0lBQzNELENBQUM7SUFFTSxhQUFhLENBQUMsT0FBTztRQUMxQixNQUFNLEtBQUssR0FBRyxFQUFFLENBQUM7UUFFakIsSUFBSyxJQUFJLENBQUMsV0FBcUIsQ0FBQyxNQUFNLEVBQUU7WUFDdEMsS0FBSyxDQUFDLElBQUksQ0FBRSxJQUFJLENBQUMsV0FBcUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUNoRDtRQUVELElBQUksT0FBTyxFQUFFO1lBQ1gsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNyQjtRQUVELE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN6QixDQUFDO0lBRU0sU0FBUyxDQUFDLElBQVM7UUFDeEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDckIsQ0FBQztJQUVNLE9BQU87UUFNWixPQUFPO1lBQ0wsSUFBSSxFQUFHLElBQUksQ0FBQyxXQUFtQixDQUFDLElBQUk7WUFDcEMsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNO1lBQ25CLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztZQUNyQixTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7U0FDMUIsQ0FBQztJQUNKLENBQUM7O0FBeERhLGdCQUFJLEdBQUcsY0FBYyxDQUFDO0FBRHRDLGtDQTBEQyJ9