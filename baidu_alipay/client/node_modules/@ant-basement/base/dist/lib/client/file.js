'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const base_1 = tslib_1.__importDefault(require("./base"));
const utility_1 = require("../utility");
const constant_1 = require("../constant");
const errors_1 = require("@ant-basement/errors");
class FileClient extends base_1.default {
    constructor(builder) {
        super(builder, constant_1.Service.FILE);
    }
    async deleteFile(url) {
        return await this.request({
            path: '/files/remove',
            data: { url },
        });
    }
    async getPrivateFileByUrl(url, expires) {
        return await this.request({
            path: '/files/sign',
            data: {
                url,
                expires,
            },
        });
    }
    async uploadFile(_) {
        throw new errors_1.ECODE.UnsupportedError('children implementation required');
    }
    validateFilename(name) {
        const extension = name.split('.').pop();
        utility_1.assert(constant_1.WHITELIST_EXTENSIONS.includes(extension), 'only image file are allowed');
    }
}
exports.default = FileClient;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9jbGllbnQvZmlsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7OztBQUViLDBEQUFnQztBQUNoQyx3Q0FBb0M7QUFDcEMsMENBQTREO0FBQzVELGlEQUE2QztBQUU3QyxnQkFBaUIsU0FBUSxjQUFVO0lBQ2pDLFlBQVksT0FBTztRQUNqQixLQUFLLENBQUMsT0FBTyxFQUFFLGtCQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQU1NLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBVztRQUNqQyxPQUFPLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUN4QixJQUFJLEVBQUUsZUFBZTtZQUNyQixJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUU7U0FDZCxDQUFDLENBQUM7SUFDTCxDQUFDO0lBT00sS0FBSyxDQUFDLG1CQUFtQixDQUFDLEdBQVcsRUFBRSxPQUFnQjtRQUM1RCxPQUFPLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUN4QixJQUFJLEVBQUUsYUFBYTtZQUNuQixJQUFJLEVBQUU7Z0JBQ0osR0FBRztnQkFDSCxPQUFPO2FBQ1I7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDO0lBaUJNLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBTTtRQUM1QixNQUFNLElBQUksY0FBSyxDQUFDLGdCQUFnQixDQUFDLGtDQUFrQyxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQU9NLGdCQUFnQixDQUFDLElBQVk7UUFDbEMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN4QyxnQkFBTSxDQUFDLCtCQUFvQixDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBRSw2QkFBNkIsQ0FBQyxDQUFDO0lBQ2xGLENBQUM7Q0FDRjtBQUVELGtCQUFlLFVBQVUsQ0FBQyJ9