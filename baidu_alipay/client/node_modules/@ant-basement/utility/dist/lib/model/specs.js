"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const constant_1 = require("../constant");
const spec_1 = tslib_1.__importDefault(require("./spec"));
function snakeToCamel(key) {
    return key.toLowerCase().replace(/_(\w)/g, (_, match) => match.toUpperCase());
}
const specs = Object.assign({}, constant_1.DATABASE_OP, constant_1.COLLECTION_OP);
const OP_SPECS = {};
exports.OP_SPECS = OP_SPECS;
const OP_NAMES = [];
exports.OP_NAMES = OP_NAMES;
for (const key in specs) {
    if (specs.hasOwnProperty(key)) {
        const name = snakeToCamel(key);
        const spec = new spec_1.default(name, specs[key]);
        OP_SPECS[key] = spec;
        OP_SPECS[name] = spec;
        OP_NAMES.push(name);
    }
}
function isOpValid(op) {
    return typeof op === 'string' && OP_NAMES.indexOf(op) > -1;
}
exports.isOpValid = isOpValid;
function isCollectionOp(op) {
    return isOpValid(op) && OP_SPECS[op.toString()].scope === constant_1.SCOPE.COLLECTION;
}
exports.isCollectionOp = isCollectionOp;
function isDatabaseOp(op) {
    return isOpValid(op) && OP_SPECS[op.toString()].scope === constant_1.SCOPE.DATABASE;
}
exports.isDatabaseOp = isDatabaseOp;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BlY3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvbW9kZWwvc3BlY3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMENBQWdFO0FBQ2hFLDBEQUEwQjtBQU8xQixzQkFBc0IsR0FBVztJQUMvQixPQUFPLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFDaEYsQ0FBQztBQUVELE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLHNCQUFXLEVBQUUsd0JBQWEsQ0FBQyxDQUFDO0FBQzVELE1BQU0sUUFBUSxHQUE0QixFQUFFLENBQUM7QUF5Q3BDLDRCQUFRO0FBeENqQixNQUFNLFFBQVEsR0FBYSxFQUFFLENBQUM7QUF3Q1gsNEJBQVE7QUF0QzNCLEtBQUssTUFBTSxHQUFHLElBQUksS0FBSyxFQUFFO0lBQ3ZCLElBQUksS0FBSyxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRTtRQUM3QixNQUFNLElBQUksR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDL0IsTUFBTSxJQUFJLEdBQUcsSUFBSSxjQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBRXhDLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUM7UUFDckIsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztRQUN0QixRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3JCO0NBQ0Y7QUFPRCxtQkFBbUIsRUFBNEI7SUFDN0MsT0FBTyxPQUFPLEVBQUUsS0FBSyxRQUFRLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM3RCxDQUFDO0FBb0I0Qiw4QkFBUztBQWJ0Qyx3QkFBd0IsRUFBNEI7SUFDbEQsT0FBTyxTQUFTLENBQUMsRUFBRSxDQUFDLElBQUksUUFBUSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxnQkFBSyxDQUFDLFVBQVUsQ0FBQztBQUM3RSxDQUFDO0FBV3VDLHdDQUFjO0FBSnRELHNCQUFzQixFQUE0QjtJQUNoRCxPQUFPLFNBQVMsQ0FBQyxFQUFFLENBQUMsSUFBSSxRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsS0FBSyxLQUFLLGdCQUFLLENBQUMsUUFBUSxDQUFDO0FBQzNFLENBQUM7QUFFdUQsb0NBQVkifQ==